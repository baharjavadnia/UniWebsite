<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÙ… ÙˆØ±ÙˆØ¯ Ù†Ù…Ø±Ù‡</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <head>
    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
    
        .hover-effect:hover {
            background-color: #E5E7EB; /* Ø±Ù†Ú¯ Ù…Ø´Ø§Ø¨Ù‡ ØµÙØ­Ù‡ Ù‚Ø¨Ù„ÛŒ */
        }
    
        .modal {
            max-height: 80vh;
            overflow-y: auto;
        }
    
        .grade-red {
            color: red;
        }
    
        .hover-grade {
            cursor: pointer;
            transition: color 0.3s, transform 0.3s;
        }
        .hover-grade:hover {
            color: #2563EB; /* Ø¢Ø¨ÛŒ Ù…Ø´Ø§Ø¨Ù‡ ØµÙØ­Ù‡ Ù‚Ø¨Ù„ÛŒ */
            transform: scale(1.2);
        }
    
        .hover-message {
            cursor: pointer;
            transition: color 0.3s, transform 0.3s;
        }
        .hover-message:hover {
            color: #EF4444; /* Ù‚Ø±Ù…Ø² Ù…Ø´Ø§Ø¨Ù‡ ØµÙØ­Ù‡ Ù‚Ø¨Ù„ÛŒ */
            transform: scale(1.5);
        }
    
        nav a {
            font-size: 14px;
        }
    
        #datetime {
            font-size: 14px;
        }
    
        .back-button {
            background-color: #1e40b0; /* Matches the header color */
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .back-button:hover {
            transform: scale(1.1);
        }
    
        table {
            border-collapse: collapse;
            width: 100%;
        }
    
        th, td {
            border: 1px solid #D1D5DB;
            padding: 8px;
            text-align: right;
        }
    
        th {
            background-color: #1E3A8A;
            color: white;
        }
    
        footer {
            margin-top: auto;
            background-color: #1E3A8A;
            color: white;
            padding: 1rem;
            text-align: center;
        }
    </style>
    
</head>
<body class="bg-gray-100">

    <header class="flex justify-between items-center p-4 bg-blue-800 text-white"> 
        <div id="datetime" class="text-left ml-10"></div> 
        <nav class="flex space-x-4 ml-auto"> 
            <div class="flex space-x-4"> 
                <a href="#" class="hover:text-gray-300 mr-10">ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>  
                <a href="#" class="hover:text-gray-300 pr-10">Ø¢Ø±Ø´ÛŒÙˆ Ø§Ø®Ø¨Ø§Ø±</a> 
                <a href="#" class="hover:text-gray-300 pr-10">Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡ Ù‡Ø§</a> 
                <a href="#" class="hover:text-gray-300 pr-10">Ø³Ø§ÛŒØª Ø¢Ù…ÙˆØ²Ø´</a> 
                <a href="#" class="hover:text-gray-300 pr-10">Ø³ÛŒØ³ØªÙ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</a> 
                <a href="#" class="hover:text-gray-300 pr-10">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</a> 
            </div> 
        </nav> 
    </header>
    

    <div class="container mx-auto mt-12 mb-8 flex-grow">
        <a href="teacher info.html" class="back-button mb-4">Ø¨Ø§Ø²Ú¯Ø´Øª</a>
        
        <div class="bg-white shadow-lg rounded-lg p-5 mt-4">
            <h1 class="text-xl text-right font-bold mb-5">Ø¬Ø¯ÙˆÙ„ ØªØ¯Ø±ÛŒØ³</h1>
            <table class="w-full text-right border-collapse">
                <thead>
                    <tr class="bg-gray-200">
                        <th class="border px-4 py-2">Ø§Ø¹ØªØ±Ø§Ø¶ Ø¯Ø§Ù†Ø´Ø¬Ùˆ</th>
                        <th class="border px-4 py-2">ØªØ§Ø±ÛŒØ® ØªØ¯Ø±ÛŒØ³</th>
                        <th class="border px-4 py-2">ÙˆØ¶Ø¹ÛŒØª</th>
                        <th class="border px-4 py-2">Ù†Ù…Ø±Ù‡ Ø­Ø¯Ø§Ú©Ø«Ø±ÛŒ</th>
                        <th class="border px-4 py-2">Ù†Ù…Ø±Ù‡ Ø­Ø¯Ø§Ù‚Ù„ÛŒ</th>
                        <th class="border px-4 py-2">Ù†Ù…Ø±Ù‡ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†</th>
                        <th class="border px-4 py-2">ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´Ø¬Ùˆ</th>
                        <th class="border px-4 py-2">Ù†ÙˆØ¹ Ø¯Ø±Ø³</th>
                        <th class="border px-4 py-2">ØªØ¹Ø¯Ø§Ø¯ ÙˆØ§Ø­Ø¯</th>
                        <th class="border px-4 py-2">ØªØ±Ù… ØªØ¯Ø±ÛŒØ³</th>
                        <th class="border px-4 py-2">Ú©Ø¯ Ø¯Ø±Ø³</th>
                        <th class="border px-4 py-2">Ù†Ø§Ù… Ø¯Ø±Ø³</th>
                        <th class="border px-4 py-2">Ø´Ù…Ø§Ø±Ù‡ Ø±Ø¯ÛŒÙ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="hover-effect">
                        <td class="border px-4 py-2"><a href="#" class="text-red-600 hover:text-red-800">ğŸ’¬ 2</a></td>
                        <td class="border px-4 py-2">Û±Û´Û°Û³/Û±Û°/Û±Û¸</td>
                        <td class="border px-4 py-2">ÙØ¹Ø§Ù„</td>
                        <td class="border px-4 py-2">20</td>
                        <td class="border px-4 py-2">10</td>
                        <td class="border px-4 py-2">15</td>
                        <td class="border px-4 py-2">25</td>
                        <td class="border px-4 py-2">Ø¹Ù…Ù„ÛŒ</td>
                        <td class="border px-4 py-2">3</td>
                        <td class="border px-4 py-2">Ù†ÛŒÙ…Ø³Ø§Ù„ 1</td>
                        <td class="border px-4 py-2">101</td>
                        <td class="border px-4 py-2"><a href="#" class="text-blue-600 hover:bg-blue-200" onclick="openModal('ØªØµÙˆÛŒØ± Ø³Ø§Ø²ÛŒ', this)">ØªØµÙˆÛŒØ± Ø³Ø§Ø²ÛŒ</a></td>
                        <td class="border px-4 py-2">1</td>
                    </tr>
                    <tr class="hover-effect">
                        <td class="border px-4 py-2"><a href="#" class="text-red-600 hover:text-red-800">ğŸ’¬ 1</a></td>
                        <td class="border px-4 py-2">Û±Û´Û°Û³/Û°Û¹/Û²Û¸</td>
                        <td class="border px-4 py-2">ÙØ¹Ø§Ù„</td>
                        <td class="border px-4 py-2">18</td>
                        <td class="border px-4 py-2">12</td>
                        <td class="border px-4 py-2">17</td>
                        <td class="border px-4 py-2">30</td>
                        <td class="border px-4 py-2">Ø¹Ù…Ù„ÛŒ</td>
                        <td class="border px-4 py-2">3</td>
                        <td class="border px-4 py-2">Ù†ÛŒÙ…Ø³Ø§Ù„ 1</td>
                        <td class="border px-4 py-2">102</td>
                        <td class="border px-4 py-2"><a href="#" class="text-blue-600 hover:bg-blue-200" onclick="openModal('Ø·Ø±Ø§Ø­ÛŒ Ú©Ø§Ø±Ø§Ú©ØªØ±', this)">Ø·Ø±Ø§Ø­ÛŒ Ú©Ø§Ø±Ø§Ú©ØªØ±</a></td>
                        <td class="border px-4 py-2">2</td>
                    </tr>
                    <tr class="hover-effect">
                        <td class="border px-4 py-2"><a href="#" class="text-red-600 hover:text-red-800">ğŸ’¬ 0</a></td>
                        <td class="border px-4 py-2">Û±Û´Û°Û³/Û±Û°/Û°Û²</td>
                        <td class="border px-4 py-2">ÙØ¹Ø§Ù„</td>
                        <td class="border px-4 py-2">19</td>
                        <td class="border px-4 py-2">9</td>
                        <td class="border px-4 py-2">-</td>
                        <td class="border px-4 py-2">20</td>
                        <td class="border px-4 py-2">Ø¹Ù…Ù„ÛŒ/ØªØ¦ÙˆØ±ÛŒ</td>
                        <td class="border px-4 py-2">3</td>
                        <td class="border px-4 py-2">Ù†ÛŒÙ…Ø³Ø§Ù„ 1</td>
                        <td class="border px-4 py-2">103</td>
                        <td class="border px-4 py-2"><a href="#" class="text-blue-600 hover:bg-blue-200" onclick="openModal('Ù…Ø¨Ø§Ù†ÛŒ Ø±Ù†Ú¯ Ø´Ù†Ø§Ø³ÛŒ', this)">Ù…Ø¨Ø§Ù†ÛŒ Ø±Ù†Ú¯ Ø´Ù†Ø§Ø³ÛŒ</a></td>
                        <td class="border px-4 py-2">3</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div id="courseModal" class="fixed inset-0 flex items-center justify-center hidden bg-gray-800 bg-opacity-75">
        <div class="bg-white rounded-lg p-5 modal">
            <h2 class="text-lg font-bold mb-4 text-right" id="courseTitle"></h2>
            <table class="w-full text-right border-collapse">
                <thead>
                    <tr class="bg-gray-200 ">
                        <th class="border px-4 py-2">Ù†ØªÛŒØ¬Ù‡ Ù†Ù…Ø±Ù‡</th>
                        <th class="border px-4 py-2">ÙˆØ¶Ø¹ÛŒØª Ø§Ø¹ØªØ±Ø§Ø¶</th>
                        <th class="border px-4 py-2">ÙˆØ¶Ø¹ÛŒØª Ù‚ÙÙ„</th>
                        <th class="border px-4 py-2">Ù†ÙˆØ¹ Ø¯Ø±Ø³</th>
                        <th class="border px-4 py-2">ÙˆØ¶Ø¹ Ù†Ù…Ø±Ù‡</th>
                        <th class="border px-4 py-2">Ù†Ù…Ø±Ù‡</th>
                        <th class="border px-4 py-2">Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ùˆ Ù†Ø§Ù…</th>
                        <th class="border px-4 py-2">Ø´Ù…Ø§Ø±Ù‡ Ø¯Ø§Ù†Ø´Ø¬Ùˆ</th>
                    </tr>
                </thead>
                <tbody id="studentList">
                    <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒØ§Ù† Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                </tbody>
            </table>
            <button onclick="saveGrades()" class="mt-5 bg-green-500 text-white px-4 py-2 rounded">Ø«Ø¨Øª Ù†Ù…Ø±Ø§Øª</button>
            <button onclick="closeModal()" class="mt-2 bg-red-500 text-white px-4 py-2 rounded">Ø¨Ø³ØªÙ†</button>
        </div>
    </div>

    <div id="complaintModal" class="fixed inset-0 flex items-center justify-center hidden bg-gray-800 bg-opacity-75">
        <div class="bg-white rounded-lg p-5 modal">
            <h2 class="text-lg font-bold mb-4">Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø§Ø¹ØªØ±Ø§Ø¶ Ø¯Ø§Ù†Ø´Ø¬Ùˆ</h2>
            <div id="complaintMessage" class="mb-4"></div>
            <textarea id="responseText" class="border w-full p-2" placeholder="Ù¾Ø§Ø³Ø® Ø§Ø³ØªØ§Ø¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯"></textarea>
            <div class="mt-2">
                <button onclick="sendResponse()" class="bg-green-500 text-white px-4 py-2 rounded">Ø§Ø±Ø³Ø§Ù„ Ù¾Ø§Ø³Ø®</button>
                <button onclick="deleteResponse()" class="bg-red-500 text-white px-4 py-2 rounded">Ø­Ø°Ù</button>
            </div>
            <button onclick="closeComplaintModal()" class="mt-5 bg-red-500 text-white px-4 py-2 rounded">Ø¨Ø³ØªÙ†</button>
        </div>
    </div>

    <footer class="bg-blue-800 text-white p-4">
        <div class="max-w-6xl mx-auto text-center">
            <p>Â© 2025 Ø¯Ø§Ù†Ø´Ú©Ø¯Ù‡ Ù‡Ù†Ø± Ùˆ Ù…Ø¹Ù…Ø§Ø±ÛŒ. ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª.</p>
            <p>Ø·Ø±Ø§Ø­ÛŒ Ùˆ ØªÙˆØ³Ø¹Ù‡ ØªÙˆØ³Ø· ØªÛŒÙ… ÙÙ†ÛŒ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ Ø¯Ø§Ù†Ø´Ú¯Ù‡ Ø®ÙˆØ§Ø±Ø²Ù…ÛŒ</p>
        </div>
    </footer>

    <script>
        // Ù†Ù…Ø§ÛŒØ´ ØªØ§Ø±ÛŒØ® Ùˆ Ø³Ø§Ø¹Øª
        function updateDateTime() {
            const now = new Date();
            const options = { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false, timeZone: 'Asia/Tehran', locale: 'fa-IR' };
            document.getElementById('datetime').innerText = now.toLocaleString('fa-IR', options);
        }

        setInterval(updateDateTime, 1000); // Ø¨Ù‡ Ø±ÙˆØ² Ø±Ø³Ø§Ù†ÛŒ Ù‡Ø± Ø«Ø§Ù†ÛŒÙ‡

        const names = ['Ø¹Ù„ÛŒ', 'Ù…Ø­Ù…Ø¯', 'Ø³Ø¹ÛŒØ¯', 'Ù…Ø±ÛŒÙ…', 'Ù†Ø±Ú¯Ø³', 'ÙØ§Ø·Ù…Ù‡', 'Ø±ÛŒØ­Ø§Ù†Ù‡', 'Ø§Ù…ÛŒØ±', 'Ø­Ø³ÛŒÙ†', 'Ø­Ø§Ù…Ø¯', 'Ù†Ø§Ù‡ÛŒØ¯', 'Ù†Ø¯Ø§', 'Ø¢ÛŒØ¯Ø§', 'Ø¨Ù‡Ø§Ø±Ù‡', 'Ù†Ø³Ø±ÛŒÙ†'];
        const lastNames = ['Ø§Ø­Ù…Ø¯ÛŒ', 'Ø­Ø³ÛŒÙ†ÛŒ', 'Ù…Ø­Ù…Ø¯ÛŒ', 'Ú©Ø±ÛŒÙ…ÛŒ', 'Ù†ÛŒÚ©Ùˆ', 'ÙØ®Ø±ÛŒ', 'ØºÙØ§Ø±ÛŒ', 'Ù¾Ù†Ø§Ù‡ÛŒ', 'Ù…ÙˆØ³ÙˆÛŒ', 'Ø´Ø±ÛŒÙÛŒ', 'Ù‚Ø§Ø³Ù…ÛŒ', 'Ù¾ÙˆØ±Ø¹Ù„ÛŒ', 'Ø±Ø¶Ø§ÛŒÛŒ', 'Ù…Ø­Ù…ÙˆØ¯ÛŒ', 'Ø³Ù„ÛŒÙ…Ø§Ù†ÛŒ'];
        const complaints = [
            "Ù†Ù…Ø±Ù‡ Ù…Ù† Ø¨Ø§ÛŒØ¯ Ø¨ÛŒØ´ØªØ± Ù…ÛŒâ€ŒØ¨ÙˆØ¯.",
            "Ù†Ù…Ø±Ù‡ Ù…Ù† Ù†Ø§Ø¯Ø±Ø³Øª Ø§Ø³Øª.",
            "Ù…Ù† Ø¨Ø§ Ù†Ù…Ø±Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ú¯Ø±ÙØªÙ… Ù…Ø®Ø§Ù„ÙÙ….",
            "Ù„Ø·ÙØ§ Ù†Ù…Ø±Ù‡ Ù…Ù† Ø±Ø§ Ø¨Ø§Ø²Ø¨ÛŒÙ†ÛŒ Ú©Ù†ÛŒØ¯.",
            "Ø³ÙˆØ§Ù„Ø§Øª Ø§Ù…ØªØ­Ø§Ù† Ø¨Ø§ Ù…Ø·Ø§Ù„Ø¨ Ø¯Ø±Ø³ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ù†Ø¨ÙˆØ¯."
        ];

        function openModal(courseName, linkElement) {
            document.getElementById("courseTitle").innerText = courseName;
            document.getElementById("courseModal").classList.remove("hidden");

            let studentList = document.getElementById("studentList");
            studentList.innerHTML = "";

            // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø±Ø¯ÛŒÙ Ù…Ø±Ø¨ÙˆØ·Ù‡
            const row = linkElement.closest('tr');
            const dateCell = row.cells[1]; // Ø³ØªÙˆÙ† ØªØ§Ø±ÛŒØ® ØªØ¯Ø±ÛŒØ³
            const currentDate = dateCell.innerText; // ØªØ§Ø±ÛŒØ® ÙØ¹Ù„ÛŒ

            // Ø¨Ù‡ Ø±ÙˆØ² Ø±Ø³Ø§Ù†ÛŒ ØªØ§Ø±ÛŒØ® Ø¯Ø± Ø±Ø¯ÛŒÙ Ù…Ø±Ø¨ÙˆØ·Ù‡
            const updatedDate = new Date();
            const formattedDate = updatedDate.toLocaleDateString('fa-IR'); // ÙØ±Ù…Øª ØªØ§Ø±ÛŒØ® Ø¨Ù‡ Ø²Ø¨Ø§Ù† ÙØ§Ø±Ø³ÛŒ
            dateCell.innerText = formattedDate; // ØªØ§Ø±ÛŒØ® Ø¬Ø¯ÛŒØ¯

            const studentCount = Math.floor(Math.random() * 16) + 15; // Ø¨ÛŒÙ† 15 ØªØ§ 30 Ø¯Ø§Ù†Ø´Ø¬Ùˆ
            let complaintCount = 0;

            for (let i = 0; i < studentCount; i++) {
                const studentNumber = `123${i}`;
                const fullName = `${names[Math.floor(Math.random() * names.length)]} ${lastNames[Math.floor(Math.random() * lastNames.length)]}`;
                const score = (courseName !== 'Ù…Ø¨Ø§Ù†ÛŒ Ø±Ù†Ú¯ Ø´Ù†Ø§Ø³ÛŒ') ? (Math.random() * 20).toFixed(2) : '';
                const status = score ? 'Ø§Ø¹Ù„Ø§Ù… Ø´Ø¯Ù‡' : 'Ø§Ø¹Ù„Ø§Ù… Ù†Ø´Ø¯Ù‡'; // ØªØºÛŒÛŒØ± Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§
                const lockStatus = ['Ù‚ÙÙ„ Ø¢Ù…ÙˆØ²Ø´', 'Ø§ØµÙ„Ø§Ø­ Ù†Ù…Ø±Ù‡'][Math.floor(Math.random() * 2)];
                let courseType;

                // ØªØ¹ÛŒÛŒÙ† Ù†ÙˆØ¹ Ø¯Ø±Ø³ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø±Ø¯ÛŒÙ
                if (i < 2) {
                    courseType = 'Ø¹Ù…Ù„ÛŒ'; // Ø¨Ø±Ø§ÛŒ Ø±Ø¯ÛŒÙ Ø§ÙˆÙ„ Ùˆ Ø¯ÙˆÙ…
                } else {
                    courseType = 'Ø¹Ù…Ù„ÛŒ/ØªØ¦ÙˆØ±ÛŒ'; // Ø¨Ø±Ø§ÛŒ Ø±Ø¯ÛŒÙ Ø³ÙˆÙ…
                }

                const result = score ? (score >= 10 ? 'Ù‚Ø¨ÙˆÙ„' : '<span class="grade-red">Ø±Ø¯</span>') : 'Ø§Ø¹Ù„Ø§Ù… Ù†Ø´Ø¯Ù‡'; // ØªØºÛŒÛŒØ± Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§

                const complaintMessage = (status === 'Ø§Ø¹Ù„Ø§Ù… Ø´Ø¯Ù‡' && Math.random() < 0.3) ? complaints[Math.floor(Math.random() * complaints.length)] : '';

                if (complaintMessage) {
                    complaintCount++;
                }

                studentList.innerHTML += `
                    <tr>
                        <td class="border px-4 py-2">${result}</td>
                        <td class="border px-4 py-2">${complaintMessage ? `<a href="#" class="text-red-600 hover:text-red-800 hover-message" onclick="openComplaintModal('${complaintMessage}')">ğŸ’¬</a>` : '-'}</td>
                        <td class="border px-4 py-2">
                            <select>
                                <option ${lockStatus === 'Ù‚ÙÙ„ Ø¢Ù…ÙˆØ²Ø´' ? 'selected' : ''}>Ù‚ÙÙ„ Ø¢Ù…ÙˆØ²Ø´</option>
                                <option ${lockStatus === 'Ø§ØµÙ„Ø§Ø­ Ù†Ù…Ø±Ù‡' ? 'selected' : ''}>Ø§ØµÙ„Ø§Ø­ Ù†Ù…Ø±Ù‡</option>
                            </select>
                        </td>
                        <td class="border px-4 py-2">${courseType}</td> <!-- Ù†ÙˆØ¹ Ø¯Ø±Ø³ Ø¨Ø±Ø§Ø³Ø§Ø³ Ø±Ø¯ÛŒÙ -->
                        <td class="border px-4 py-2">${status}</td>
                        <td class="border px-4 py-2 hover-grade" onclick="editGrade(this)">${score || '-'}</td>
                        <td class="border px-4 py-2">${fullName}</td>
                        <td class="border px-4 py-2">${studentNumber}</td>
                    </tr>`;
            }

            const complaintIcon = document.querySelector(`tbody tr:nth-child(${document.querySelectorAll('tbody tr').length}) td:nth-child(1) a`);
            complaintIcon.innerText = `ğŸ’¬ ${complaintCount}`;
        }

        function closeModal() {
            document.getElementById("courseModal").classList.add("hidden");
        }

        function openComplaintModal(message) {
            document.getElementById("complaintMessage").innerText = message;
            document.getElementById("complaintModal").classList.remove("hidden");
        }

        function closeComplaintModal() {
            document.getElementById("complaintModal").classList.add("hidden");
            document.getElementById("responseText").value = '';
        }

        function sendResponse() {
            const responseText = document.getElementById("responseText").value;
            if (responseText) {
                alert("Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ø¯Ø§Ù†Ø´Ø¬Ùˆ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.");
                closeComplaintModal();
            } else {
                alert("Ù„Ø·ÙØ§ Ù¾Ø§Ø³Ø® Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.");
            }
        }

        function deleteResponse() {
            document.getElementById("responseText").value = '';
            alert("Ù¾Ø§Ø³Ø® Ø­Ø°Ù Ø´Ø¯.");
        }

        function editGrade(element) {
            let currentGrade = prompt("Ù„Ø·ÙØ§ Ù†Ù…Ø±Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ø¨ÛŒÙ† 0 ØªØ§ 20):", element.innerText);
            if (currentGrade !== null) {
                currentGrade = parseFloat(currentGrade);
                if (!isNaN(currentGrade) && currentGrade >= 0 && currentGrade <= 20) {
                    element.innerText = currentGrade.toFixed(2);
                    const row = element.parentElement;
                    const resultCell = row.cells[0];
                    const statusCell = row.cells[4];
                    resultCell.innerHTML = currentGrade >= 10 ? 'Ù‚Ø¨ÙˆÙ„' : '<span class="grade-red">Ø±Ø¯</span>';
                    statusCell.innerText = 'Ø§Ø¹Ù„Ø§Ù… Ø´Ø¯Ù‡';
                } else {
                    alert("Ù†Ù…Ø±Ù‡ Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† 0 ØªØ§ 20 Ø¨Ø§Ø´Ø¯.");
                }
            }
        }

        function saveGrades() {
            const studentRows = document.querySelectorAll("#studentList tr");
            let totalScore = 0;
            let minScore = Infinity;
            let maxScore = -Infinity;
            let count = 0;

            studentRows.forEach(row => {
                const scoreCell = row.cells[5];
                const score = parseFloat(scoreCell.innerText);
                if (!isNaN(score)) {
                    totalScore += score;
                    count++;
                    minScore = Math.min(minScore, score);
                    maxScore = Math.max(maxScore, score);
                }
            });

            const averageScore = count > 0 ? (totalScore / count).toFixed(2) : '-';
            const averageCell = document.querySelector("tbody tr:first-child td:nth-child(6)"); 
            const minCell = document.querySelector("tbody tr:first-child td:nth-child(5)"); 
            const maxCell = document.querySelector("tbody tr:first-child td:nth-child(4)"); 

            averageCell.innerText = averageScore;
            minCell.innerText = count > 0 ? minScore : '-';
            maxCell.innerText = count > 0 ? maxScore : '-';
            
            alert("Ù†Ù…Ø±Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯.");
        }

        updateDateTime(); // Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ØªØ§Ø±ÛŒØ® Ùˆ Ø³Ø§Ø¹Øª
    </script>
</body>
</html>